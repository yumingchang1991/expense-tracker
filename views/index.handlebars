<div class="container d-flex flex-column my-3 w-50">
  <form id="filter-form" method="get" action="/">
    <select class="form-select" name="categoryFilter">
      <option selected disabled hidden>依分類篩選</option>
      <option value="">顯示所有分類</option>
      <option value="家居物業" {{#if (isCategoryFilterSelected "家居物業")}}selected{{/if}}>篩選：家居物業</option>
      <option value="交通出行" {{#if (isCategoryFilterSelected "交通出行")}}selected{{/if}}>篩選：交通出行</option>
      <option value="休閒娛樂" {{#if (isCategoryFilterSelected "休閒娛樂")}}selected{{/if}}>篩選：休閒娛樂</option>
      <option value="餐飲食品" {{#if (isCategoryFilterSelected "餐飲食品")}}selected{{/if}}>篩選：餐飲食品</option>
      <option value="其他" {{#if (isCategoryFilterSelected "其他")}}selected{{/if}}>篩選：其他</option>
    </select>
  </form>
  <div class="d-flex my-3">
    <span class="me-4 fs-4">總金額:</span>
    <span class="fs-1 align-top text-danger" id="total-amount">{{totalAmount}}</span>
  </div>
  {{#if records}}
  <table class="table table-striped table-hover align-middle">
    <tbody>
      {{#each records}}
      {{#with this}}
      <tr>
        <td class="text-center">
          <i class="fa-2xl {{categoryId.iconClass}}"></i>
        </td>
        <td>
          <div class="d-flex flex-column m-0 p-0">
          <span class="fs-4">{{name}}</span>
          <span class="fs-6">{{date}}</span>
          </div>
        </td>
        <td class="text-end">{{amount}}</td>
        <td class="text-end">
          <div class="d-flex justify-content-end">
          <a href="/records/{{_id}}/edit" class="btn btn-outline mx-1">
            修改
          </a>
          <form method="post" action="/records/{{_id}}?_method=DELETE">
            <button type="submit" class="btn btn-outline mx-1">
              刪除
            </button>
          </form>
          </div>
        </td>
      </tr>
      {{/with}}
      {{/each}}
    </tbody>
  </table>
  {{else}}
  <div class="alert alert-danger d-flex align-items-center" role="alert">
    <i class="fa-solid fa-circle-info"></i>
    <div class="ms-2">無紀錄，請新增支出</div>
  </div>
  {{/if}}
  <a href="/records/new" class="btn btn-danger">新增支出</a>
</div>
<script src="/javascripts/index.js"></script>